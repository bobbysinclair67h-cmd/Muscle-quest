<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Muscle Quest</title>
<script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
<script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
<style>
  body { margin:0; font-family:'Segoe UI', sans-serif; background:#0f172a; color:#e2e8f0; }
  h1 { text-align:center; color:#38bdf8; }
  nav { display:flex; justify-content:space-around; background:#1e293b; padding:10px; }
  nav button { background:none; border:none; color:#e2e8f0; font-size:16px; cursor:pointer; }
  .tab { padding:20px; }
  select, input, button { padding:5px; margin:5px; }
  ul { padding-left:20px; }
  .body-diagram { display:flex; justify-content:center; margin:10px 0; }
  .muscle { width: 30px; height: 30px; margin:2px; display:inline-block; background:#334155; border-radius:4px; }
  .trained { background:#22c55e; }
</style>
</head>
<body>
<div id="root"></div>

<script type="text/babel">

const workoutsLibrary = [
  { name:'Push-Up', muscles:['Chest','Triceps'] },
  { name:'Squat', muscles:['Legs','Glutes'] },
  { name:'Plank', muscles:['Core'] },
  { name:'Bicep Curl', muscles:['Biceps'] },
  { name:'Shoulder Press', muscles:['Shoulders'] }
];

function BodyView({trainedMuscles}) {
  const [gender,setGender] = React.useState('male');
  const allMuscles = ['Chest','Triceps','Legs','Glutes','Core','Biceps','Shoulders'];
  return (
    <div>
      <h2>Body View</h2>
      <select value={gender} onChange={e=>setGender(e.target.value)}>
        <option value="male">Male</option>
        <option value="female">Female</option>
      </select>
      <div className="body-diagram">
        {allMuscles.map(muscle=>(
          <div key={muscle} className={"muscle "+(trainedMuscles.includes(muscle)?'trained':'')} title={muscle}></div>
        ))}
      </div>
      <p>Green squares show muscles youâ€™ve trained.</p>
    </div>
  );
}

function Workouts({addWorkout}) {
  return (
    <div>
      <h2>Workouts</h2>
      {workoutsLibrary.map((w,i)=>(
        <div key={i}>
          <h3>{w.name}</h3>
          <p><strong>Muscles:</strong> {w.muscles.join(', ')}</p>
        </div>
      ))}
    </div>
  );
}

function RecordWorkout({onAdd}) {
  const [selectedWorkout,setSelectedWorkout] = React.useState(workoutsLibrary[0].name);
  const [records,setRecords] = React.useState(()=>JSON.parse(localStorage.getItem('mqRecords')||'[]'));

  const add = ()=>{
    const workout = workoutsLibrary.find(w=>w.name===selectedWorkout);
    const newRecord = {name:workout.name, muscles: workout.muscles, date: new Date().toLocaleDateString()};
    const updated = [...records,newRecord];
    setRecords(updated);
    localStorage.setItem('mqRecords',JSON.stringify(updated));
    onAdd(updated);
  }

  return (
    <div>
      <h2>Record Workout</h2>
      <select value={selectedWorkout} onChange={e=>setSelectedWorkout(e.target.value)}>
        {workoutsLibrary.map(w=><option key={w.name} value={w.name}>{w.name}</option>)}
      </select>
      <button onClick={add}>Add Workout</button>
      <ul>
        {records.map((r,i)=><li key={i}>{r.date}: {r.name} ({r.muscles.join(', ')})</li>)}
      </ul>
    </div>
  );
}

function Coach() {
  const [question,setQuestion] = React.useState('');
  const [answer,setAnswer] = React.useState('');
  const ask = ()=>{
    if(question){
      setAnswer("This is a placeholder answer from your AI coach.");
      setQuestion('');
    }
  }
  return (
    <div>
      <h2>AI Coach</h2>
      <input value={question} onChange={e=>setQuestion(e.target.value)} placeholder="Ask a question"/>
      <button onClick={ask}>Ask</button>
      {answer && <p><strong>{answer}</strong></p>}
    </div>
  );
}

function Profile() {
  const [height,setHeight] = React.useState(localStorage.getItem('mqHeight')||'');
  const [weight,setWeight] = React.useState(localStorage.getItem('mqWeight')||'');
  const save = ()=>{
    localStorage.setItem('mqHeight',height);
    localStorage.setItem('mqWeight',weight);
  }
  return (
    <div>
      <h2>Profile</h2>
      <input value={height} onChange={e=>setHeight(e.target.value)} placeholder="Height"/>
      <input value={weight} onChange={e=>setWeight(e.target.value)} placeholder="Weight"/>
      <button onClick={save}>Save</button>
      <p>Height: {height} | Weight: {weight}</p>
    </div>
  );
}

function App() {
  const [tab,setTab] = React.useState('Body');
  const [records,setRecords] = React.useState(()=>JSON.parse(localStorage.getItem('mqRecords')||'[]'));
  const trainedMuscles = Array.from(new Set(records.flatMap(r=>r.muscles)));

  return (
    <div>
      <h1>Muscle Quest</h1>
      <nav>
        {['Body','Workouts','Record','Coach','Profile'].map(t=>(
          <button key={t} onClick={()=>setTab(t)}>{t}</button>
        ))}
      </nav>
      <div className="tab">
        {tab==='Body' && <BodyView trainedMuscles={trainedMuscles}/>}
        {tab==='Workouts' && <Workouts />}
        {tab==='Record' && <RecordWorkout onAdd={setRecords}/>}
        {tab==='Coach' && <Coach />}
        {tab==='Profile' && <Profile />}
      </div>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<App />);
</script>
</body>
</html>
