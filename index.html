<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Muscle Quest</title>
<script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
<script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
<style>
  body { margin:0; font-family:'Segoe UI', sans-serif; background:#0f172a; color:#e2e8f0; }
  h1 { text-align:center; color:#38bdf8; }
  nav { display:flex; justify-content:space-around; background:#1e293b; padding:10px; }
  nav button { background:none; border:none; color:#e2e8f0; font-size:16px; cursor:pointer; }
  .tab { padding:20px; }
  select, input, button { padding:5px; margin:5px; }
  ul { padding-left:20px; }
  .body-container { display:flex; justify-content:center; margin:20px 0; }
  svg { width:200px; height:400px; }
  .muscle { fill:#334155; stroke:#1e293b; stroke-width:1; cursor:pointer; }
  .trained { fill:#22c55e; }
</style>
</head>
<body>
<div id="root"></div>

<script type="text/babel">

// Predefined workout library
const defaultWorkouts = [
  { name:'Push-Up', muscles:['Chest','Triceps'] },
  { name:'Squat', muscles:['Legs','Glutes'] },
  { name:'Plank', muscles:['Core'] },
  { name:'Bicep Curl', muscles:['Biceps'] },
  { name:'Shoulder Press', muscles:['Shoulders'] },
  { name:'Deadlift', muscles:['Back','Legs'] },
  { name:'Lunge', muscles:['Legs','Glutes'] },
  { name:'Crunch', muscles:['Core'] },
  { name:'Bench Press', muscles:['Chest','Triceps'] },
  { name:'Pull-Up', muscles:['Back','Biceps'] },
  { name:'Tricep Dip', muscles:['Triceps'] },
  { name:'Leg Press', muscles:['Legs','Glutes'] },
  { name:'Overhead Press', muscles:['Shoulders','Triceps'] },
  { name:'Russian Twist', muscles:['Core'] },
  { name:'Calf Raise', muscles:['Legs'] },
  { name:'Chest Fly', muscles:['Chest'] },
  { name:'Hammer Curl', muscles:['Biceps'] },
  { name:'Front Raise', muscles:['Shoulders'] },
  { name:'Back Extension', muscles:['Back'] },
  { name:'Glute Bridge', muscles:['Glutes','Core'] }
];

// BodyView component with male/female SVG
function BodyView({trainedMuscles}) {
  const [gender,setGender] = React.useState(localStorage.getItem('mqGender')||'male');
  React.useEffect(()=>localStorage.setItem('mqGender', gender), [gender]);
  
  const allMuscles = ['Chest','Triceps','Legs','Glutes','Core','Biceps','Shoulders','Back'];

  // Simple example of SVG muscle shapes
  return (
    <div>
      <h2>Body View</h2>
      <select value={gender} onChange={e=>setGender(e.target.value)}>
        <option value="male">Male</option>
        <option value="female">Female</option>
      </select>
      <div className="body-container">
        <svg viewBox="0 0 100 200">
          {/* Chest */}
          <rect x="35" y="40" width="30" height="20" className={"muscle "+(trainedMuscles.includes('Chest')?'trained':'')} title="Chest"/>
          {/* Triceps */}
          <rect x="20" y="40" width="10" height="30" className={"muscle "+(trainedMuscles.includes('Triceps')?'trained':'')} title="Triceps"/>
          <rect x="70" y="40" width="10" height="30" className={"muscle "+(trainedMuscles.includes('Triceps')?'trained':'')} title="Triceps"/>
          {/* Biceps */}
          <rect x="20" y="10" width="10" height="20" className={"muscle "+(trainedMuscles.includes('Biceps')?'trained':'')} title="Biceps"/>
          <rect x="70" y="10" width="10" height="20" className={"muscle "+(trainedMuscles.includes('Biceps')?'trained':'')} title="Biceps"/>
          {/* Shoulders */}
          <rect x="30" y="10" width="40" height="10" className={"muscle "+(trainedMuscles.includes('Shoulders')?'trained':'')} title="Shoulders"/>
          {/* Core */}
          <rect x="35" y="60" width="30" height="40" className={"muscle "+(trainedMuscles.includes('Core')?'trained':'')} title="Core"/>
          {/* Legs */}
          <rect x="35" y="100" width="10" height="40" className={"muscle "+(trainedMuscles.includes('Legs')?'trained':'')} title="Legs"/>
          <rect x="55" y="100" width="10" height="40" className={"muscle "+(trainedMuscles.includes('Legs')?'trained':'')} title="Legs"/>
          {/* Glutes */}
          <rect x="40" y="80" width="20" height="20" className={"muscle "+(trainedMuscles.includes('Glutes')?'trained':'')} title="Glutes"/>
          {/* Back */}
          <rect x="35" y="40" width="30" height="40" className={"muscle "+(trainedMuscles.includes('Back')?'trained':'')} title="Back"/>
        </svg>
      </div>
      <p>Green muscles are trained.</p>
    </div>
  );
}

// Workouts component
function Workouts({workouts, addCustom}) {
  const [newName,setNewName] = React.useState('');
  const [newMuscles,setNewMuscles] = React.useState('');

  const addWorkout = ()=>{
    if(newName && newMuscles){
      addCustom({name:newName, muscles:newMuscles.split(',').map(m=>m.trim())});
      setNewName(''); setNewMuscles('');
    }
  }

  return (
    <div>
      <h2>Workouts</h2>
      <ul>
        {workouts.map((w,i)=><li key={i}>{w.name} — {w.muscles.join(', ')}</li>)}
      </ul>
      <h3>Add Custom Workout</h3>
      <input value={newName} onChange={e=>setNewName(e.target.value)} placeholder="Workout Name"/>
      <input value={newMuscles} onChange={e=>setNewMuscles(e.target.value)} placeholder="Muscles (comma)"/>
      <button onClick={addWorkout}>+ Add</button>
    </div>
  );
}

// RecordWorkout component
function RecordWorkout({workouts, onAddSession}) {
  const [selectedExercises,setSelectedExercises] = React.useState([]);
  const [currentExercise,setCurrentExercise] = React.useState(workouts[0]?.name || '');
  const [reps,setReps] = React.useState(10);
  const [sets,setSets] = React.useState(3);
  const [duration,setDuration] = React.useState(0); // optional seconds
  const [records,setRecords] = React.useState(()=>JSON.parse(localStorage.getItem('mqSessions')||'[]'));

  const addExercise = ()=>{
    const workout = workouts.find(w=>w.name===currentExercise);
    if(workout) setSelectedExercises([...selectedExercises,{...workout,reps,sets,duration}]);
  }

  const finishWorkout = ()=>{
    if(selectedExercises.length===0) return;
    const newSession = {date: new Date().toLocaleDateString(), exercises:selectedExercises};
    const updated = [...records,newSession];
    setRecords(updated);
    localStorage.setItem('mqSessions', JSON.stringify(updated));
    onAddSession(updated);
    setSelectedExercises([]);
  }

  return (
    <div>
      <h2>Record Workout</h2>
      <select value={currentExercise} onChange={e=>setCurrentExercise(e.target.value)}>
        {workouts.map(w=><option key={w.name} value={w.name}>{w.name}</option>)}
      </select>
      <input type="number" value={reps} onChange={e=>setReps(Number(e.target.value))} placeholder="Reps"/>
      <input type="number" value={sets} onChange={e=>setSets(Number(e.target.value))} placeholder="Sets"/>
      <input type="number" value={duration} onChange={e=>setDuration(Number(e.target.value))} placeholder="Duration sec"/>
      <button onClick={addExercise}>+ Add Exercise</button>

      <h3>Current Session</h3>
      <ul>
        {selectedExercises.map((ex,i)=><li key={i}>{ex.name} — {ex.reps} reps x {ex.sets} sets ({ex.duration} sec)</li>)}
      </ul>
      <button onClick={finishWorkout}>Finish Workout</button
